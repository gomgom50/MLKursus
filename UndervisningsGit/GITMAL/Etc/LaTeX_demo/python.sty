%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  SRC LISTINGS
%   
%    see https://en.wikibooks.org/wiki/LaTeX/Source_Code_Listings for  details
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\srcdir{Src}

\newcommand{\srcfile}[1]{
  \lstinputlisting[language=python]{\srcdir/#1}
}

% /usr/local/share/texmf/tex/latex/bera/beramono.sty
%\usepackage[scaled]{beramono}
%\renewcommand*\familydefault{\ttdefault} %% Only if the base font of the document is to be typewriter style
%\usepackage[T1]{fontenc}

\newcommand{\ttberamono}{\usefont{T1}{fvm}{m}{n}} 
\def\mypythonfont{\ttberamono}
\def\mypythonfontsizebase{\scriptsize}
\def\mypythonfontsize{\mypythonfontsizebase}
\def\mypythonfontstyle{\mypythonfont\mypythonfontsize}

\definecolor{pythonblue}  {RGB}{ 64,128,128}
\definecolor{pythonred}   {RGB}{186, 33, 33}
\definecolor{pythongreen} {RGB}{ 15,128,  0}
\definecolor{pythonviolet}{RGB}{170, 34,255}
\definecolor{pythongray}  {RGB}{127,127,127}

\lstdefinestyle{mypython}{
    backgroundcolor=\color{white},
    commentstyle=\color{pythonblue}\mypythonfontstyle,
    keywordstyle=\color{pythongreen}\mypythonfontstyle,
    numberstyle=\tiny\color{pythongray},
    stringstyle=\color{pythonred}\mypythonfontstyle,
    basicstyle=\mypythonfontstyle,
	  keywords={assert,import,print,None}
	  keywords=[2]{std_logic,,positive,natural,None},
    keywordstyle=[2]\color{pythonred}\mypythonfontstyle,
		morecomment=[l]{//},
		%morestring=*[d]{"},
    %morestring=[s][]{"}{"},
    %morestring=**[d]{'},
    %morestring=[d]{\\'},
    %morestring=**[d]{"},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=14pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
}

\lstset{literate=%
   *{0}{{{\color{pythongreen}0}}}1
    {1}{{{\color{pythongreen}1}}}1
    {2}{{{\color{pythongreen}2}}}1
    {3}{{{\color{pythongreen}3}}}1
    {4}{{{\color{pythongreen}4}}}1
    {5}{{{\color{pythongreen}5}}}1
    {6}{{{\color{pythongreen}6}}}1
    {7}{{{\color{pythongreen}7}}}1
    {8}{{{\color{pythongreen}8}}}1
    {9}{{{\color{pythongreen}9}}}1
    {=}{{{\color{pythonviolet}=}}}1
    {<}{{{\color{pythonviolet}<}}}1
    {>}{{{\color{pythonviolet}>}}}1
    {\%}{{{\color{pythonviolet}\%}}}1
}

\lstset{style=mypython}

\lstnewenvironment{code}{\lstset{language=python,numbers=none,xleftmargin=0.0cm,framesep=0mm}}{}
%\def\bs{\begin{code}}
%\def\es{\end{code}} NOTE: cef not possible!

% NOTE: do not pretty-format this one
\newcommand{\pcode}[2][]{\def\thispcodecolor{pythonblue}\ifthenelse{\equal{#1}{}}{}{\def\thispcodecolor{#1}}{\color{\thispcodecolor}{\tt #2}}}

\newcommand{\src}[2][]{%
	\ifthenelse{ \equal{#1}{} }
		{}
		{\def\mypythonfontsize{#1}}
		  
	\srcfile{#2}    
	\def\mypythonfontsize{\mypythonfontsizebase}
}
